<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>동적 UI 기반 B2B 플랫폼 혁신 전략</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <!-- Chosen Palette: Calm Corporate -->
    <!-- Application Structure Plan: The application uses a central interactive simulator to demonstrate the critical "Session Context" preservation required by the user's latest concern. The UI logic now explicitly prioritizes Access Path (URL) > Logged-in User/Primary Affiliation > Session Context > Default, reflecting the necessary business adjustment where channel context is king but member identity is the ultimate safety net. Supporting tabs contain refactored, non-redundant strategic content (Member/Branding, Product/Order, Data/Growth) to show business value. -->
    <!-- Visualization & Content Choices: 
        - 4-Step Plan: Goal: Inform (Process) -> Presentation: Flow steps.
        - Core Logic Demo: Goal: Demonstrate (Session Persistence & Priority & Primary Affiliation) -> Presentation: UI Simulator with explicit "Session Context" tracker and Multi-Affiliation Switch.
        - Strategic Applications: Goal: Organize & Explore (Business Value) -> Presentation: Tabbed interface with consolidated, non-redundant content.
        - Library/Method: Vanilla JavaScript for all interactions, including the simulated Session Storage management. Tailwind CSS for styling.
    -->
    <!-- CONFIRMATION: NO SVG graphics used. NO Mermaid JS used. -->
    <style>
        body { font-family: 'Pretendard', sans-serif; }
        .tab-btn { transition: all 0.3s ease; }
        .tab-btn.active { border-color: #2563eb; color: #2563eb; background-color: #eff6ff; }
        .content-panel { display: none; }
        .content-panel.active { display: block; }
        .flow-step { text-align: center; padding: 1rem; border: 1px solid #e5e7eb; border-radius: 0.5rem; background-color: white; flex: 1; min-width: 150px; }
        .flow-arrow { display: flex; align-items: center; justify-content: center; font-size: 1.5rem; color: #9ca3af; margin: 0 0.5rem; }
        @media (max-width: 768px) { .flow-container { flex-direction: column; } .flow-arrow { transform: rotate(90deg); margin: 0.5rem 0; } }
    </style>
    <link rel="stylesheet" as="style" crossorigin href="https://cdn.jsdelivr.net/gh/orioncactus/pretendard@v1.3.9/dist/web/static/pretendard.min.css" />
</head>
<body class="bg-slate-50 text-slate-800">

    <!-- Password Overlay -->
    <div id="passwordOverlay" class="fixed inset-0 bg-slate-800 bg-opacity-95 flex items-center justify-center z-50">
        <div class="bg-white p-8 rounded-2xl shadow-2xl max-w-sm w-full text-center">
            <h2 class="text-2xl font-bold mb-4">비밀번호를 입력하세요</h2>
            <p class="text-sm text-slate-500 mb-4">콘텐츠를 보려면 비밀번호가 필요합니다.</p>
            <input type="password" id="passwordInput" class="w-full p-3 border border-slate-300 rounded-md mb-4 focus:outline-none focus:ring-2 focus:ring-blue-500" placeholder="비밀번호">
            <button id="passwordSubmit" class="w-full bg-blue-600 text-white font-semibold py-3 rounded-md hover:bg-blue-700 transition-colors">확인</button>
            <p id="errorMessage" class="text-red-500 mt-4 text-sm hidden">비밀번호가 틀렸습니다.</p>
        </div>
    </div>

    <!-- Main Content -->
    <div id="mainContent" class="hidden">
        <div class="container mx-auto p-4 md:p-8">
            
            <header class="text-center mb-12">
                <h1 class="text-4xl md:text-5xl font-bold text-slate-900 mb-4">동적 UI 기반 B2B 플랫폼 혁신 전략</h1>
                <p class="text-lg text-slate-600 max-w-3xl mx-auto">사용자 접속 경로와 유형에 따라 개인화된 화면을 제공하여 파트너사의 비즈니스 성장을 지원하고, 운영 효율을 극대화하는 방안을 탐색합니다.</p>
            </header>

            <main>
                <!-- Section 1: Implementation Flow -->
                <section id="implementation" class="mb-16">
                    <h2 class="text-3xl font-bold text-center mb-8">핵심 구현 플로우 요약</h2>
                    <p class="text-center text-slate-600 mb-8 max-w-2xl mx-auto">
                        **세션 컨텍스트 유지**를 통해 내부 링크 이동 시에도 유통사 맞춤형 UI가 유지됩니다. 판단 우선순위는 **URL > 로그인 회원 > 세션 컨텍스트** 순입니다.
                    </p>
                    <div class="flow-container flex justify-center items-stretch flex-wrap gap-2 md:gap-4">
                        <div class="flow-step">
                            <div class="text-3xl mb-2">①</div>
                            <h3 class="font-bold text-lg mb-1">데이터 연동</h3>
                            <p class="text-sm text-slate-500">회원/상품 정보에 '유통사 코드' 연결</p>
                        </div>
                        <div class="flow-arrow">&rarr;</div>
                        <div class="flow-step">
                            <div class="text-3xl mb-2">②</div>
                            <h3 class="font-bold text-lg mb-1">세션 컨텍스트 저장</h3>
                            <p class="text-sm text-slate-500">전용 링크 접속 시, 유통사 ID를 **Session Storage**에 저장</p>
                        </div>
                        <div class="flow-arrow">&rarr;</div>
                        <div class="flow-step">
                            <div class="text-3xl mb-2">③</div>
                            <h3 class="font-bold text-lg mb-1">4단계 우선순위 판단</h3>
                            <p class="text-sm text-slate-500">URL > 로그인 회원 > 세션 > 기본 순으로 최종 UI 데이터 조합</p>
                        </div>
                        <div class="flow-arrow">&rarr;</div>
                        <div class="flow-step">
                            <div class="text-3xl mb-2">④</div>
                            <h3 class="font-bold text-lg mb-1">사용자 화면 적용</h3>
                            <p class="text-sm text-slate-500">결정된 로고, 상품, GNB 버튼을 화면에 동적으로 구현</p>
                        </div>
                    </div>
                </section>
                
                <!-- Section 2: Interactive Simulator -->
                <section id="simulator" class="mb-16 bg-white p-6 md:p-8 rounded-2xl shadow-lg border border-slate-200">
                    <h2 class="text-3xl font-bold text-center mb-2">동적 UI 인터랙티브 시뮬레이터</h2>
                    <p class="text-center text-slate-600 mb-8 max-w-2xl mx-auto">
                        **[주요 소속]** 설정과 **[소속 전환]** 기능을 통해 다중 소속 환경에서 UI가 어떻게 제어되는지 확인해보세요.
                    </p>
                    <div class="grid md:grid-cols-3 gap-6 items-start">
                        <div class="md:col-span-1 bg-slate-50 p-6 rounded-lg">
                            <h3 class="font-bold text-lg mb-4">시나리오 설정</h3>
                            <div class="space-y-4">
                                <div>
                                    <label for="userType" class="block text-sm font-medium text-slate-700 mb-1">접속 사용자 유형</label>
                                    <select id="userType" class="w-full p-2 border border-slate-300 rounded-md focus:ring-blue-500 focus:border-blue-500">
                                        <option value="guest">비로그인 방문자</option>
                                        <option value="general">일반 고객</option>
                                        <option value="distA_member">ORDERZ A유통사 전용회원</option>
                                        <option value="distB_member">ORDERZ B유통사 전용회원</option>
                                        <option value="multi_member">ORDERZ 멀티 전용회원 (A/B사 소속)</option>
                                        <option value="distA_admin">ORDERZ A유통사 관리자</option>
                                        <option value="hq_admin">본사 관리자</option>
                                    </select>
                                </div>
                                
                                <!-- New Feature: Multi-Affiliation Switch -->
                                <div id="multiAffiliationContainer" class="hidden">
                                    <label for="activeAffiliation" class="block text-sm font-medium text-slate-700 mb-1">주요 소속 전환 (Multi-회원)</label>
                                    <select id="activeAffiliation" class="w-full p-2 border border-slate-300 rounded-md focus:ring-green-500 focus:border-green-500 bg-white">
                                        <option value="distA">ORDERZ A유통사 (현재 주요 소속)</option>
                                        <option value="distB">ORDERZ B유통사</option>
                                    </select>
                                </div>

                                <div>
                                    <label for="accessPath" class="block text-sm font-medium text-slate-700 mb-1">접속 경로 (URL)</label>
                                    <select id="accessPath" class="w-full p-2 border border-slate-300 rounded-md focus:ring-blue-500 focus:border-blue-500">
                                        <option value="default">https://orderz.kr (기본 도메인)</option>
                                        <option value="distA">https://distA.orderz.kr (A유통사 전용)</option>
                                        <option value="distB">https://distB.orderz.kr (B유통사 전용)</option>
                                        <option value="internal">https://orderz.kr/mypage/settings (내부 링크)</option>
                                    </select>
                                </div>
                            </div>
                            <div class="mt-6 p-3 bg-blue-100 rounded-md border border-blue-300">
                                <p class="text-sm font-medium text-blue-800 mb-1">현재 세션 컨텍스트 (Session Storage)</p>
                                <p id="sessionContext" class="text-lg font-bold text-blue-900">없음 (HQ)</p>
                            </div>
                        </div>
                        <div class="md:col-span-2 p-6 bg-slate-100 rounded-lg border-2 border-dashed border-slate-300">
                            <h3 class="font-bold text-lg mb-4 text-center">미리보기: 사용자 맞춤형 화면</h3>
                            <div class="bg-white rounded-md shadow-inner p-4">
                                <!-- Mock Header -->
                                <div class="flex justify-between items-center p-3 border-b border-slate-200 mb-4">
                                    <span id="mockLogoText" class="text-xl font-bold">ORDERZ HQ</span>
                                    <button id="mockGNB" class="px-4 py-2 bg-blue-600 text-white rounded-md text-sm font-semibold hover:bg-blue-700 transition-colors"></button>
                                </div>
                                <!-- Mock Product List -->
                                <div>
                                    <h4 class="font-semibold px-3 mb-2">노출 상품 목록</h4>
                                    <ul id="mockProducts" class="space-y-2 text-sm"></ul>
                                </div>
                            </div>
                        </div>
                    </div>
                </section>

                <!-- Section 3: Applications -->
                <section id="applications" class="mb-16">
                    <h2 class="text-3xl font-bold text-center mb-8">운영 및 마케팅 활용 방안</h2>
                    <p class="text-center text-slate-600 mb-8 max-w-2xl mx-auto">
                        동적 UI는 플랫폼의 경쟁력을 강화하는 3가지 핵심 축을 중심으로 전략적 가치를 제공합니다.
                    </p>
                    
                    <div class="grid lg:grid-cols-3 gap-8">
                        <div class="bg-white p-6 rounded-lg shadow-md border border-slate-100">
                            <h3 class="font-bold text-xl mb-3">파트너 브랜딩 & 고객 유지</h3>
                            <p class="text-slate-600 mb-4">유통사 전용 링크와 맞춤형 UI(로고, GNB)를 통해 고객에게 독립적인 '전용몰' 경험을 제공합니다. 이는 유통사에게 높은 소속감을 부여하고, 고객은 접속 경로와 관계없이 일관된 파트너 브랜드를 경험하여 이탈을 방지합니다.</p>
                            <p class="text-slate-600 font-semibold text-blue-700">핵심: 신규 가입 시 전용 링크의 유통사 ID를 **자동으로 신규 회원의 소속 코드로 기록**하여, 유통사의 고객 획득 및 회원 관리 부담을 제거하고 **전용 회원**을 자동 생성합니다.</p>
                        </div>
                        <div class="bg-white p-6 rounded-lg shadow-md border border-slate-100">
                            <h3 class="font-bold text-xl mb-3">타겟 상품 및 거래 최적화</h3>
                            <p class="text-slate-600 mb-4">접속 컨텍스트(경로 또는 세션)를 기준으로 해당 유통사의 전용 상품만 노출합니다. 이로써 경쟁사 상품 노출 없이 타겟팅된 판매 전략이 가능해지며, 고객은 불필요한 상품 탐색 없이 핵심 거래 상품을 빠르게 찾을 수 있습니다.</p>
                            <p class="text-slate-600">향후 맞춤형 가격(계약 단가) 및 여신 한도 정보까지 동적으로 표시하여 주문 프로세스의 효율을 극대화합니다.</p>
                        </div>
                        <div class="bg-white p-6 rounded-lg shadow-md border border-slate-100">
                            <h3 class="font-bold text-xl mb-3">데이터 기반 확장성 확보</h3>
                            <p class="text-slate-600 mb-4">URL, 세션, 로그인 정보를 통합하여 유통사별 유입 경로와 고객 행동 데이터를 명확히 분석합니다. 이는 파트너사별 성과 분석 및 지원 전략을 수립하는 핵심 기반이 됩니다.</p>
                            <p class="text-slate-600">데이터 기반으로 새로운 수익 모델(맞춤 광고, 프리미엄 서비스 등)을 설계하고, 플랫폼의 전반적인 성장 전략을 고도화할 수 있습니다.</p>
                        </div>
                    </div>
                </section>
            </main>
        
            <footer class="text-center mt-16 pt-8 border-t border-slate-200">
                <p class="text-slate-500">본 문서는 '사용자 맞춤형 동적 UI 개발 기획안'을 기반으로 제작된 인터랙티브 분석 자료입니다.</p>
            </footer>
        </div>
    </div>

<script>
    // 이 변수는 Session Storage의 시뮬레이션 역할을 합니다.
    let simulatedSessionContext = 'hq'; 

    document.addEventListener('DOMContentLoaded', function () {
        const correctPassword = '4579';
        const passwordOverlay = document.getElementById('passwordOverlay');
        const passwordInput = document.getElementById('passwordInput');
        const passwordSubmit = document.getElementById('passwordSubmit');
        const errorMessage = document.getElementById('errorMessage');
        const mainContent = document.getElementById('mainContent');

        function checkPassword() {
            if (passwordInput.value === correctPassword) {
                passwordOverlay.classList.add('hidden');
                mainContent.classList.remove('hidden');
                initializeSimulator();
            } else {
                errorMessage.classList.remove('hidden');
                passwordInput.value = '';
            }
        }

        passwordSubmit.addEventListener('click', checkPassword);
        passwordInput.addEventListener('keydown', function(event) {
            if (event.key === 'Enter') {
                checkPassword();
            }
        });

        function initializeSimulator() {
            const userTypeSelect = document.getElementById('userType');
            const accessPathSelect = document.getElementById('accessPath');
            const sessionContextDisplay = document.getElementById('sessionContext');
            const multiAffiliationContainer = document.getElementById('multiAffiliationContainer');
            const activeAffiliationSelect = document.getElementById('activeAffiliation');
            
            const mockLogoText = document.getElementById('mockLogoText');
            const mockGNB = document.getElementById('mockGNB');
            const mockProducts = document.getElementById('mockProducts');

            // UI Data setup
            const uiData = {
                hq: { logoText: 'ORDERZ', gnbText: '고객센터', gnbLink: '/service' },
                distA: { logoText: 'A유통사', gnbText: '[A사 소개]', gnbLink: '/distA/contact' },
                distB: { logoText: 'B유통사', gnbText: '[B사 소식]', gnbLink: '/distB/lounge' },
                admin: { gnbText: '관리자단', gnbLink: '/admin' }
            };
            
            const productData = {
                common: ['[공용] 프리미엄 원두 1kg', '[공용] 라떼 아트용 우유 1L', '[공용] 클리닝 타블렛'],
                distA: ['[A사전용] 스페셜티 싱글 오리진', '[A사전용] 시그니처 블렌드 티'],
                distB: ['[B사전용] 대용량 콜드브루 원액', '[B사전용] 베이커리 생지 세트']
            };

            function updateSimulator() {
                const user = userTypeSelect.value;
                const path = accessPathSelect.value;
                
                // 멀티 소속 스위치 표시 여부 결정
                const isMultiMember = user === 'multi_member';
                if (isMultiMember) {
                    multiAffiliationContainer.classList.remove('hidden');
                } else {
                    multiAffiliationContainer.classList.add('hidden');
                }

                let currentLogoText;
                let currentGNB;
                let productsToShow = [];
                let contextDistId = null; 

                // ---------------------------------------------------------------------
                // 1. Context Determination Logic (4-Step Prioritization)
                // ---------------------------------------------------------------------
                
                // 1순위: 현재 접속 URL 확인 (최우선: 마케팅/경쟁 채널 분리)
                if (path === 'distA') {
                    contextDistId = 'distA';
                } else if (path === 'distB') {
                    contextDistId = 'distB';
                }

                // 2순위: 로그인 회원 정보 확인 (URL이 유통사 전용이 아닐 경우, 전용 회원의 권한 보호)
                if (contextDistId === null || path === 'internal' || path === 'default') {
                    if (isMultiMember) {
                        // 멀티 회원일 경우, '주요 소속 전환' 필터의 값을 사용 (사용자의 명시적 선택)
                        contextDistId = activeAffiliationSelect.value;
                    } else if (user === 'distA_member' || user === 'distA_admin') {
                        contextDistId = 'distA';
                    } else if (user === 'distB_member' || user === 'distB_admin') {
                        contextDistId = 'distB';
                    }
                }

                // 3순위: 세션 컨텍스트 확인 (회원 정보도 없을 때, 세션 유지를 위해)
                if (contextDistId === null && simulatedSessionContext !== 'hq' && (path === 'internal' || path === 'default')) {
                    contextDistId = simulatedSessionContext;
                }
                
                // 4순위: 본사 기본
                contextDistId = contextDistId || 'hq';

                // 세션 컨텍스트 업데이트 (로그인 지속성 및 URL 우선 반영)
                if (path === 'distA' || path === 'distB') {
                    simulatedSessionContext = contextDistId;
                } else if (contextDistId !== 'hq' && (user.includes('member') || user.includes('admin') || isMultiMember)) {
                    simulatedSessionContext = contextDistId;
                } else if (contextDistId !== 'hq' && simulatedSessionContext === 'hq' && !user.includes('member')) {
                    // 비로그인 방문자가 전용 링크로 들어와 세션이 설정된 경우 유지
                    simulatedSessionContext = contextDistId;
                } else if (contextDistId === 'hq' && simulatedSessionContext !== 'hq' && (path === 'internal' || path === 'default') && !user.includes('member')) {
                    // 비로그인 상태에서 내부 이동 시 3순위 (세션)가 적용되도록 simulatedSessionContext 유지
                }


                // ---------------------------------------------------------------------
                // 2. UI Rendering based on Final Context
                // ---------------------------------------------------------------------
                
                let finalDistId = contextDistId;

                // 2-1. 관리자 그룹 처리 (관리자는 항상 관리자단 버튼 고정)
                if (user.includes('admin')) {
                    currentGNB = { text: uiData.admin.gnbText, link: uiData.admin.gnbLink };
                    
                    // 관리자는 모든 상품을 볼 수 있다고 가정
                    productsToShow = [...productData.common, ...productData.distA, ...productData.distB];

                    // 관리자의 로고는 소속 유통사 또는 본사 로고를 따른다.
                    if (user === 'distA_admin') {
                        currentLogoText = uiData.distA.logoText;
                    } else if (user === 'distB_admin') {
                        currentLogoText = uiData.distB.logoText;
                    } else {
                         currentLogoText = uiData.hq.logoText;
                    }

                } else {
                    // 2-2. 고객 그룹 처리 (컨텍스트에 따라 UI 변경)
                    if (finalDistId === 'distA') {
                        currentLogoText = uiData.distA.logoText;
                        currentGNB = { text: uiData.distA.gnbText, link: uiData.distA.gnbLink };
                        productsToShow = productData.distA;
                    } else if (finalDistId === 'distB') {
                        currentLogoText = uiData.distB.logoText;
                        currentGNB = { text: uiData.distB.gnbText, link: uiData.distB.gnbLink };
                        productsToShow = productData.distB;
                    } else { // HQ/Default Context
                        currentLogoText = uiData.hq.logoText;
                        currentGNB = { text: uiData.hq.gnbText, link: uiData.hq.gnbLink };
                        productsToShow = productData.common;
                    }
                }
                
                // ---------------------------------------------------------------------
                // 3. Update Display
                // ---------------------------------------------------------------------
                mockLogoText.textContent = currentLogoText;
                mockGNB.textContent = currentGNB.text;
                mockGNB.onclick = () => alert(`'${currentGNB.link}' (으)로 이동합니다.`);
                sessionContextDisplay.textContent = simulatedSessionContext.toUpperCase();
                
                mockProducts.innerHTML = '';
                if (productsToShow.length === 0) {
                    const li = document.createElement('li');
                    li.className = 'p-2 bg-slate-50 rounded text-center text-slate-400';
                    li.textContent = '노출할 상품이 없습니다.';
                    mockProducts.appendChild(li);
                } else {
                    productsToShow.forEach(product => {
                        const li = document.createElement('li');
                        li.className = 'p-2 bg-slate-50 rounded';
                        if (product.includes('전용')) {
                            li.innerHTML = `<span class="font-semibold text-blue-600">${product}</span>`;
                        } else {
                            li.textContent = product;
                        }
                        mockProducts.appendChild(li);
                    });
                }
            }

            userTypeSelect.addEventListener('change', updateSimulator);
            accessPathSelect.addEventListener('change', updateSimulator);
            activeAffiliationSelect.addEventListener('change', updateSimulator);
            
            updateSimulator();
        }
    });
</script>
</body>
</html>
