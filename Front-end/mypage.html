<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>마이페이지 (최근 주문내역 개선)</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://fonts.googleapis.com/css2?family=Noto+Sans+KR:wght@400;500;700&display=swap" rel="stylesheet">
    <style>
        body {
            font-family: 'Noto Sans KR', sans-serif;
        }
        .tab-button.active {
            border-bottom: 2px solid #1f2937;
            color: #1f2937;
            font-weight: 600;
        }
        .tab-content {
            display: none;
        }
        .tab-content.active {
            display: block;
        }

        /* 주문 상태별 색상 (요구사항 반영) */
        .status-badge {
            display: inline-block;
            padding: 0.25rem 0.5rem; /* py-1 px-2 */
            font-size: 0.75rem; /* text-xs */
            font-weight: 600; /* font-semibold */
            border-radius: 0.25rem; /* rounded */
        }
        /* 입금대기 (기존) */
        .status-deposit-wait {
            background-color: #fff7ed; /* bg-orange-100 */
            color: #c2410c; /* text-orange-600 */
        }
        /* 배송완료 (기존) */
        .status-delivery-complete {
            background-color: #f0fdfa; /* bg-teal-100 */
            color: #0f766e; /* text-teal-700 */
        }
        /* 결제완료 (요구사항: 완료:Blue) */
        .status-complete {
            background-color: #eef2ff; /* bg-blue-100 */
            color: #3730a3; /* text-blue-700 */
        }
        /* 주문취소 (기존) */
        .status-cancel {
            background-color: #fef2f2; /* bg-red-100 */
            color: #dc2626; /* text-red-600 */
        }
        /* 주문 (요구사항: 주문:Pink) */
        .status-order {
            background-color: #fdf2f8; /* bg-pink-100 */
            color: #be185d; /* text-pink-700 */
        }
        /* 입금 (요구사항: 입금:Green) */
        .status-deposit-confirm {
            background-color: #f0fdf4; /* bg-green-100 */
            color: #15803d; /* text-green-700 */
        }
        /* 배송 (요구사항: 배송:Orange) */
        .status-delivery-prep {
             background-color: #fff7ed; /* bg-orange-100 */
            color: #c2410c; /* text-orange-700 */
        }

        /* ▼▼▼▼▼ 메인 탭 버튼 (기존) ▼▼▼▼▼ */
        .filter-btn {
            padding: 4px 10px;
            font-size: 0.75rem; /* 12px */
            border-radius: 16px;
            border: 1px solid #D1D5DB; /* gray-300 */
            background-color: #F9FAFB; /* gray-50 */
            color: #374151; /* gray-700 */
            transition: all 0.2s;
            flex-shrink: 0; /* 버튼이 줄어들지 않도록 설정 */
        }
        .filter-btn:hover {
            background-color: #F3F4F6; /* gray-100 */
        }
        .filter-btn.active {
            background-color: #EFF6FF; /* blue-50 */
            border-color: #BFDBFE; /* blue-200 */
            color: #1D4ED8; /* blue-700 */
            font-weight: 500;
        }
        /* ▲▲▲▲▲ 스타일 추가 끝 ▲▲▲▲▲ */
        
        /* ▼▼▼▼▼ '정산내역' 탭 내부 하위 필터 스타일 (신규) ▼▼▼▼▼ */
        .sub-filter-btn {
            padding: 2px 6px; /*
            font-size: 0.875rem; /* text-sm */
            font-size: 0.8125rem; /* 13px */
            color: #6B7280; /* gray-500 */
            background-color: transparent;
            border: 0;
            border-bottom: 2px solid transparent; /* Transparent border for alignment */
            border-radius: 0; /* No rounding */
            margin-right: 12px; /* space-x-3 equivalent */
            transition: all 0.2s;
            flex-shrink: 0;
            line-height: 1.5;
        }
        .sub-filter-btn:hover {
            color: #374151; /* gray-700 */
        }
        .sub-filter-btn.active {
            color: #1D4ED8; /* blue-700 */
            font-weight: 600; /* semibold */
            border-bottom-color: #1D4ED8; /* blue-700 */
        }
        /* ▲▲▲▲▲ 하위 필터 스타일 끝 ▲▲▲▲▲ */
        
        /* ▼▼▼▼▼ 소계 탭 스타일 (신규) ▼▼▼▼▼ */
        .summary-row {
            display: flex;
            align-items: center;
            font-weight: 700;
            border-top: 2px solid #374151; /* gray-700 */
            background-color: #F3F4F6; /* gray-100 */
            padding: 12px 4px; /* py-3 px-1 */
            margin-top: 4px; /* 리스트와 약간의 간격 */
        }
        .summary-row .label {
            width: 25%;
            text-align: center;
            font-size: 0.875rem; /* text-sm */
            color: #374151; /* gray-700 */
        }
        .summary-row .value {
            width: 25%;
            text-align: right;
            padding: 0 4px; /* px-1 */
            font-size: 0.875rem; /* text-sm */
        }
        /* ▲▲▲▲▲ 소계 탭 스타일 끝 ▲▲▲▲▲ */

    </style>
</head>
<body class="bg-gray-100">

    <div class="max-w-md mx-auto bg-white min-h-screen">
        
        <!-- 헤더 -->
        <header class="flex justify-between items-center p-4 border-b sticky top-0 bg-white z-10">
            <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M15 18l-6-6 6-6"/></svg>
            <h1 class="text-lg font-bold">마이페이지</h1>
            <div class="w-6"></div>
        </header>

        <main>
            
            <!-- 프로필 섹션 -->
            <section class="p-4">
                <div class="flex items-center">
                    <div class="w-16 h-16 bg-gray-200 rounded-full flex items-center justify-center flex-shrink-0">
                        <svg xmlns="http://www.w3.org/2000/svg" width="32" height="32" viewBox="0 0 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="text-gray-500"><path d="M20 21v-2a4 4 0 0 0-4-4H8a4 4 0 0 0-4 4v2"></path><circle cx="12" cy="7" r="4"></circle></svg>
                    </div>
                    <div class="ml-4">
                        <p class="font-bold text-lg">꽃놀이식당(김민준)</p>
                        <p class="text-sm text-gray-600 mt-1">경남 창원시 성산구 가양로 34</p>
                        <!-- ▼▼▼▼▼ 정보/로그아웃 링크 (위치 이동 및 디자인 변경) ▼▼▼▼▼ -->
                        <div class="mt-3 flex items-center space-x-3 text-xs text-gray-500">
                            <a href="#" class="hover:underline">정보수정</a>
                            <span class="text-gray-300">|</span>
                            <a href="#" class="hover:underline">로그아웃</a>
                            <span class="text-gray-300">|</span>
                            <a href="#" class="hover:underline">자주찾는 질문</a>
                            <span class="text-gray-300">|</span>
                            <a href="#" class="hover:underline">공지사항</a>
                        </div>
                        <!-- ▲▲▲▲▲ 링크 수정 끝 ▲▲▲▲▲ -->
                    </div>
                </div>
            </section>

            <!-- 잔액/결제 관리 -->
            <section class="p-4 pt-0">
                <!-- ▼▼▼▼▼ 디자인 수정: 미수금, 결제 버튼 삭제 / 계좌번호 + 복사 버튼으로 변경 ▼▼▼▼▼ -->
                <div class="border rounded-lg p-4 bg-gray-50">
                    <div class="flex items-center justify-between">
                        <div class="flex-grow">
                            <span class="text-sm text-gray-600">입금 계좌:</span>
                            <span id="accountNumber" class="text-sm font-bold text-gray-800 ml-1">우리은행 1002-123-456789</span>
                        </div>
                        <button id="copyAccountBtn" class="px-3 py-1 bg-gray-200 text-gray-700 text-xs font-semibold rounded hover:bg-gray-300 relative flex-shrink-0">
                            복사
                            <span id="copyMessage" class="absolute left-1/2 -top-8 -translate-x-1/2 bg-gray-700 text-white text-xs px-2 py-1 rounded hidden whitespace-nowrap">복사되었습니다!</span>
                        </button>
                    </div>
                </div>
                <!-- ▲▲▲▲▲ 디자인 수정 끝 ▲▲▲▲▲ -->
            </section>

            
            <!-- ▼▼▼▼▼ 탭 네비게이션 (주문, 알림, 정산 순으로 변경) ▼▼▼▼▼ -->
            <section class="p-4 pt-2 pb-0">
                <div class="flex justify-start space-x-2 overflow-x-auto whitespace-nowrap pb-2 border-b">
                    <!-- JS와 충돌 방지를 위해 'main-tab-btn' 클래스 사용 -->
                    <button class="main-tab-btn filter-btn active" data-tab="orders">주문내역</button>
                    <!-- 순서 변경: 정산내역 -> 알림내역 -->
                    <button class="main-tab-btn filter-btn" data-tab="notifications">알림내역</button>
                    <!-- 순서 변경: 알림내역 -> 정산내역 -->
                    <button class="main-tab-btn filter-btn" data-tab="settlements">정산내역</button>
                </div>
            </section>
            <!-- ▲▲▲▲▲ 탭 네비게이션 변경 끝 ▲▲▲▲▲ -->

            
            <!-- 탭 컨텐츠 -->
            <div id="tab-contents" class="p-4">
                
                <!-- 최근 주문내역 탭 -->
                <div id="orders" class="tab-content active">
                    <!-- ▼▼▼▼▼ [신규] 주문내역 하위 필터 추가 ▼▼▼▼▼ -->
                    <div class="mb-3 flex justify-start overflow-x-auto whitespace-nowrap pb-1 border-b">
                        <button class="sub-filter-btn active">최근 7일</button>
                        <button class="sub-filter-btn">당월 내역</button>
                        <button class="sub-filter-btn">전월 내역</button>
                        <button class="sub-filter-btn">전체</button>
                    </div>
                    <!-- ▲▲▲▲▲ [신규] 주문내역 하위 필터 끝 ▲▲▲▲▲ -->

                    <!-- ▼▼▼▼▼ 주문 목록 컨테이너 ID 추가 ▼▼▼▼▼ -->
                    <div id="order-list-container"> 
                        
                        <!-- ▼▼▼▼▼ 표 제목 행 (sticky top 수정: 109px -> 61px) ▼▼▼▼▼ -->
                        <div class="flex bg-gray-50 border-b sticky top-[61px] z-[9]">
                            <!-- 1. '배송일' -> '일자' (정렬 버튼) -->
                            <div id="sort-order-date" class="w-1/4 text-center px-1 py-2 text-sm font-semibold text-gray-600 cursor-pointer select-none flex items-center justify-center space-x-1">
                                <span>일자</span>
                                <span id="sort-order-arrow">▼</span> <!-- 기본: 최신순 (내림차순) -->
                            </div>
                            <!-- 2. '상품명/금액' -> '주문내역' (변경됨) -->
                            <div class="w-[45%] px-2 py-2 text-sm font-semibold text-gray-600 text-center">
                                판매
                            </div>
                            <div class="w-[30%] px-1 py-2 text-sm font-semibold text-gray-600 text-center">
                                입금
                            </div>
                        </div>
                        <!-- ▲▲▲▲▲ 표 제목 행 끝 ▲▲▲▲▲ -->

                        <!-- 주문 내역 아이템 1: 입금대기 -->
                        <div class="order-item-row border-b py-3 flex items-stretch"> <!-- 스타일 변경: 카드형 -> 행(row)형 -->
                            
                            <!-- 일자/상태 -->
                            <div class="w-1/4 text-center px-1">
                                <p class="text-sm text-gray-700">2025-08-26</p>
                                <div class="mt-1">
                                    <span class="status-badge status-deposit-wait">입금대기</span>
                                </div>
                            </div>
                            
                            <!-- 주문내역 -->
                            <div class="w-[45%] px-2 text-center">
                                <p class="text-sm text-gray-800 overflow-hidden text-ellipsis whitespace-nowrap">양파 20KG 외 2건</p>
                                <div class="text-xs text-gray-500 mt-1 space-y-0.5">
                                    <p>주문금액: 51,000원</p>
                                    <p class="hide-if-zero">추가금액: 0원</p>
                                    <!-- ▼▼▼▼▼ 마이너스 표기 및 잔액 수정 ▼▼▼▼▼ -->
                                    <p class="hide-if-zero">취소금액: -2,000원</p>
                                    <!-- ▲▲▲▲▲ 수정 끝 ▲▲▲▲▲ -->
                                </div>
                            </div>
                            
                            <!-- 결제내역 -->
                            <div class="w-[30%] px-1 text-xs text-gray-500 flex flex-col justify-between">
                                <div class="space-y-1 text-right">
                                    <p>0원(입금)</p>
                                    <p class="hide-if-zero">0원(포인트(쿠))</p>
                                    <p class="hide-if-zero">0원(환불액)</p>
                                </div>
                                <div class="text-right">
                                    <p class="font-bold text-red-600">49,000원(잔액)</p> <!-- 건별 잔액 (51,000 - 2,000) -->
                                </div>
                            </div>
                        </div>

                        <!-- 주문 내역 아이템 2: 배송완료 -->
                        <div class="order-item-row border-b py-3 flex items-stretch"> <!-- 스타일 변경: 카드형 -> 행(row)형 -->
                            <!-- 일자/상태 -->
                            <div class="w-1/4 text-center px-1">
                                <p class="text-sm text-gray-700">2025-08-25</p>
                                <div class="mt-1">
                                    <span class="status-badge status-delivery-complete">배송완료</span>
                                </div>
                            </div>
                            <!-- 주문내역 -->
                            <div class="w-[45%] px-2 text-center">
                                <p class="text-sm text-gray-800 overflow-hidden text-ellipsis whitespace-nowrap">흙쪽파(1kg)단 외 1건</p>
                                <div class="text-xs text-gray-500 mt-1 space-y-0.5">
                                    <p>주문금액: 32,700원</p>
                                    <p class="hide-if-zero">추가금액: 0원</p>
                                    <!-- ▼▼▼▼▼ 'hide-if-zero' 클래스 추가 ▼▼▼▼▼ -->
                                    <p class="hide-if-zero">취소금액: 0원</p>
                                    <!-- ▲▲▲▲▲ 클래스 추가 끝 ▲▲▲▲▲ -->
                                </div>
                            </div>
                            <!-- 결제내역 -->
                            <div class="w-[30%] px-1 text-xs text-gray-500 flex flex-col justify-between">
                                <div class="space-y-1 text-right">
                                    <p>32,700원(입금)</p>
                                    <p class="hide-if-zero">0원(포인트(쿠))</p>
                                    <p class="hide-if-zero">0원(환불액)</p>
                                </div>
                                <div class="text-right">
                                    <p class="font-bold text-gray-500">0원(잔액)</p> <!-- 건별 잔액 -->
                                </div>
                            </div>
                        </div>

                        <!-- 주문 내역 아이템 3: 배송완료 -->
                        <div class="order-item-row border-b py-3 flex items-stretch"> <!-- 스타일 변경: 카드형 -> 행(row)형 -->
                            <!-- 일자/상태 -->
                            <!-- ▼▼▼▼▼ '결제완료'를 '배송완료'로 변경 (status-complete -> status-delivery-complete) ▼▼▼▼▼ -->
                            <div class="w-1/4 text-center px-1">
                                <p class="text-sm text-gray-700">2025-08-24</p>
                                <div class="mt-1">
                                    <span class="status-badge status-delivery-complete">배송완료</span>
                                </div>
                            </div>
                            <!-- ▲▲▲▲▲ 변경 완료 ▲▲▲▲▲ -->
                            <!-- 주문내역 -->
                            <div class="w-[45%] px-2 text-center">
                                <p class="text-sm text-gray-800 overflow-hidden text-ellipsis whitespace-nowrap">배추_3입망 외 5건</p>
                                <div class="text-xs text-gray-500 mt-1 space-y-0.5">
                                    <p>주문금액: 16,700원</p>
                                    <p class="hide-if-zero">추가금액: 0원</p>
                                    <!-- ▼▼▼▼▼ 'hide-if-zero' 클래스 추가 ▼▼▼▼▼ -->
                                    <p class="hide-if-zero">취소금액: 0원</p>
                                    <!-- ▲▲▲▲▲ 클래스 추가 끝 ▲▲▲▲▲ -->
                                </div>
                            </div>
                            <!-- 결제내역 -->
                            <div class="w-[30%] px-1 text-xs text-gray-500 flex flex-col justify-between">
                                <div class="space-y-1 text-right">
                                    <p>16,700원(입금)</p>
                                    <p class="hide-if-zero">0원(포인트(쿠))</p>
                                    <p class="hide-if-zero">0원(환불액)</p>
                                </div>
                                <div class="text-right">
                                    <p class="font-bold text-gray-500">0원(잔액)</p> <!-- 건별 잔액 -->
                                </div>
                            </div>
                        </div>

                        <!-- 주문 내역 아이템 4: 추가결제분 -->
                        <div class="order-item-row border-b py-3 flex items-stretch"> <!-- 스타일 변경: 카드형 -> 행(row)형 -->
                            <!-- 일자/상태 -->
                            <!-- ▼▼▼▼▼ '결제완료'를 '배송완료'로 변경 (status-complete -> status-delivery-complete) ▼▼▼▼▼ -->
                            <div class="w-1/4 text-center px-1">
                                <p class="text-sm text-gray-700">2025-08-23</p>
                                <div class="mt-1">
                                    <span class="status-badge status-delivery-complete">배송완료</span>
                                </div>
                                <p class="text-xs text-blue-600 mt-1">(추가결제분)</p>
                            </div>
                            <!-- ▲▲▲▲▲ 변경 완료 ▲▲▲▲▲ -->
                            <!-- 주문내역 -->
                            <div class="w-[45%] px-2 text-center">
                                <p class="text-sm text-gray-800 overflow-hidden text-ellipsis whitespace-nowrap">엄청나게 긴 상품명입니다. 레이아웃이 깨지지 않아야 합니다.</p>
                                <div class="text-xs text-gray-500 mt-1 space-y-0.5">
                                    <p>주문금액: 10,000원</p>
                                    <p class="hide-if-zero">추가금액: 3,000원</p>
                                    <!-- ▼▼▼▼▼ 'hide-if-zero' 클래스 추가 ▼▼▼▼▼ -->
                                    <p class="hide-if-zero">취소금액: 0원</p>
                                    <!-- ▲▲▲▲▲ 클래스 추가 끝 ▲▲▲▲▲ -->
                                </div>
                            </div>
                            <!-- 결제내역 -->
                            <div class="w-[30%] px-1 text-xs text-gray-500 flex flex-col justify-between">
                                <div class="space-y-1 text-right">
                                    <p>13,000원(입금)</p>
                                    <p class="hide-if-zero">0원(포인트(쿠))</p>
                                    <p class="hide-if-zero">0원(환불액)</p>
                                </div>
                                <div class="text-right">
                                    <p class="font-bold text-gray-500">0원(잔액)</p> <!-- 건별 잔액 -->
                                </div>
                            </div>
                        </div>

                        <!-- 주문 내역 아이템 6: 주문취소 -->
                        <div class="order-item-row border-b py-3 flex items-stretch text-gray-400"> <!-- 스타일 변경: 카드형 -> 행(row)형 -->
                            <!-- 일자/상태 -->
                            <div class="w-1/4 text-center px-1">
                                <p class="text-sm text-gray-700">2025-08-22</p>
                                <div class="mt-1">
                                    <span class="status-badge status-cancel">주문취소</span>
                                </div>
                            </div>
                            <!-- 주문내역 -->
                            <div class="w-[45%] px-2 text-center">
                                <p class="text-sm overflow-hidden text-ellipsis whitespace-nowrap">양파 10kg 박스</p>
                                <div class="text-xs mt-1 space-y-0.5">
                                    <p>주문금액: 41,300원</p>
                                    <p class="hide-if-zero">추가금액: 0원</p>
                                    <!-- ▼▼▼▼▼ 마이너스 표기 수정 ▼▼▼▼▼ -->
                                    <p class="hide-if-zero">취소금액: -41,300원</p>
                                    <!-- ▲▲▲▲▲ 수정 끝 ▲▲▲▲▲ -->
                                </div>
                            </div>
                            <!-- 결제내역 -->
                            <div class="w-[30%] px-1 text-xs flex flex-col justify-between">
                                <div class="space-y-1 text-right">
                                    <p>41,300원(입금)</p>
                                    <p class="hide-if-zero">0원(포인트(쿠))</p>
                                    <p class="hide-if-zero">41,300원(환불액)</p>
                                </div>
                                <div class="text-right">
                                    <p class="font-bold text-gray-500">0원(잔액)</p> <!-- 건별 잔액 -->
                                </div>
                            </div>
                        </div>

                    </div> <!-- 'order-list-container' 탭 내부 div 래퍼 닫기 -->
                    <button class="w-full mt-4 text-center p-3 text-sm font-medium text-gray-700 bg-gray-100 rounded-lg hover:bg-gray-200">
                        내역 더보기
                    </button>

                </div>
                
                <!-- ▼▼▼▼▼ '알림내역' 탭 (순서 변경됨) ▼▼▼▼▼ -->
                <div id="notifications" class="tab-content">
                    
                    <div class="mb-3 flex justify-start overflow-x-auto whitespace-nowrap pb-1 border-b">
                        <button class="sub-filter-btn active">최근 7일</button>
                        <button class="sub-filter-btn">당월 내역</button>
                        <button class="sub-filter-btn">전월 내역</button>
                        <button class="sub-filter-btn">전체</button>
                    </div>
                    
                    <!-- ▼▼▼▼▼ 알림 내역 헤더 (sticky top 수정: 109px -> 61px) ▼▼▼▼▼ -->
                    <div class="flex bg-gray-50 border-y sticky top-[61px] z-[9]">
                        <div id="sort-notification-date" class="w-[25%] px-1 py-2 text-sm font-semibold text-gray-600 cursor-pointer select-none flex items-center justify-center space-x-1">
                            <span>일자</span>
                            <span id="sort-notification-arrow">▼</span> <!-- 기본: 최신순 (내림차순) -->
                        </div>
                        <!-- ▼▼▼▼▼ text-center 추가 ▼▼▼▼▼ -->
                        <div class="w-[40%] px-2 py-2 text-sm font-semibold text-gray-600 text-center">
                            사유
                        </div>
                        <div class="w-[35%] px-2 py-2 text-sm font-semibold text-gray-600 text-center">
                            전달사항
                        </div>
                        <!-- ▲▲▲▲▲ text-center 추가 끝 ▲▲▲▲▲ -->
                    </div>

                    <!-- ▼▼▼▼▼ 알림 내역 리스트 컨테이너 (ID 추가) ▼▼▼▼▼ -->
                    <div id="notification-list-container">
                        <!-- 알림 내역 아이템 1 -->
                        <div class="border-b py-3 flex text-sm">
                            <div class="w-[25%] text-center px-1 text-gray-700 text-xs">2025-11-01</div>
                            <div class="w-[40%] px-2 text-gray-800">올리브오일(엑스트라버진) 수량변경 1 -> 0</div>
                            <div class="w-[35%] px-2 text-gray-600">다음 주문부터 가능하겠습니다.</div>
                        </div>
                        
                        <!-- 알림 내역 아이템 2 (정렬 테스트용) -->
                        <div class="border-b py-3 flex text-sm">
                            <div class="w-[25%] text-center px-1 text-gray-700 text-xs">2025-10-30</div>
                            <!-- ▼▼▼▼▼ 내용 수정 ▼▼▼▼▼ -->
                            <div class="w-[40%] px-2 text-gray-800">포인트 ▶ 18,800</div>
                            <div class="w-[35%] px-2 text-gray-600">품절로 결품입니다. 목요일 입고 예정입니다.</div>
                            <!-- ▲▲▲▲▲ 내용 수정 끝 ▲▲▲▲▲ -->
                        </div>
                    </div>
                    <!-- ▲▲▲▲▲ 알림 내역 리스트 컨테이너 끝 ▲▲▲▲▲ -->
                    
                </div>
                <!-- ▲▲▲▲▲ '알림내역' 탭 끝 (순서 변경됨) ▲▲▲▲▲ -->
                
                <!-- ▼▼▼▼▼ 정산내역 탭 (순서 변경됨) ▼▼▼▼▼ -->
                <div id="settlements" class="tab-content">
                    
                    <!-- ▼▼▼▼▼ [삭제] 누적 정산 요약 섹션 삭제 ▼▼▼▼▼ -->
                    <!-- 
                    <div class="mb-4 p-4 border rounded-lg bg-white shadow-sm">
                        ... (이전 누적 정산 요약 섹션)
                    </div> 
                    -->
                    <!-- ▲▲▲▲▲ [삭제] 누적 정산 요약 섹션 삭제 끝 ▲▲▲▲▲ -->

                    <!-- ▼▼▼▼▼ 정산 내역 필터 (스타일 변경) ▼▼▼▼▼ -->
                    <div class="mb-3 flex justify-start overflow-x-auto whitespace-nowrap pb-1 border-b">
                        <button class="sub-filter-btn active">최근 7일</button>
                        <button class="sub-filter-btn">당월 내역</button>
                        <button class="sub-filter-btn">전월 내역</button>
                        <button class="sub-filter-btn">전체</button>
                    </div>
                    <!-- ▲▲▲▲▲ 정산 내역 필터 끝 ▲▲▲▲▲ -->

                    <!-- ▼▼▼▼▼ 정산 내역 헤더 (sticky top 수정: 109px -> 61px) ▼▼▼▼▼ -->
                    <div class="flex bg-gray-50 border-y sticky top-[61px] z-[9]">
                        <div id="sort-settlement-date" class="w-1/4 px-1 py-2 text-sm font-semibold text-gray-600 cursor-pointer select-none flex items-center justify-center space-x-1">
                            <span>일자</span>
                            <span id="sort-settlement-arrow">▲</span> <!-- 기본: 순방향 (오름차순) -->
                        </div>
                        <!-- ▼▼▼▼▼ text-right -> text-center 수정 ▼▼▼▼▼ -->
                        <div class="w-1/4 px-1 py-2 text-sm font-semibold text-gray-600 text-center">
                            판매
                        </div>
                        <div class="w-1/4 px-1 py-2 text-sm font-semibold text-gray-600 text-center">
                            입금
                        </div>
                        <div class="w-1/4 px-1 py-2 text-sm font-semibold text-gray-600 text-center">
                            잔액
                        </div>
                        <!-- ▲▲▲▲▲ text-right -> text-center 수정 끝 ▲▲▲▲▲ -->
                    </div>
                    <!-- ▲▲▲▲▲ 정산 내역 헤더 끝 ▲▲▲▲▲ -->

                    <!-- ▼▼▼▼▼ 정산 내역 리스트 컨테이너 (ID 추가) ▼▼▼▼▼ -->
                    <div id="settlement-list-container">
                        <!-- 정산 내역 아이템 4: 8월 23일 (배송완료) - 데이터 속성 추가 -->
                        <div class="border-b py-3 flex items-center text-sm settlement-item" data-date="2025-08-23" data-sales="13000" data-deposit="13000">
                            <div class="w-1/4 text-center px-1 text-gray-700">2025-08-23</div>
                            <div class="w-1/4 px-1 text-right font-medium text-red-600">+13,000</div>
                            <div class="w-1/4 px-1 text-right font-medium text-blue-600">-13,000</div>
                            <div class="w-1/4 px-1 text-right font-bold text-gray-900 balance-amount" data-balance="0">0</div> <!-- 누적 잔액 -->
                        </div>
                        
                        <!-- 정산 내역 아이템 3: 8월 24일 (배송완료) - 데이터 속성 추가 -->
                        <div class="border-b py-3 flex items-center text-sm settlement-item" data-date="2025-08-24" data-sales="16700" data-deposit="16700">
                            <div class="w-1/4 text-center px-1 text-gray-700">2025-08-24</div>
                            <div class="w-1/4 px-1 text-right font-medium text-red-600">+16,700</div>
                            <div class="w-1/4 px-1 text-right font-medium text-blue-600">-16,700</div>
                            <div class="w-1/4 px-1 text-right font-bold text-gray-900 balance-amount" data-balance="0">0</div> <!-- 누적 잔액 -->
                        </div>

                        <!-- 정산 내역 아이템 2: 8월 25일 (배송완료) - 데이터 속성 추가 -->
                        <div class="border-b py-3 flex items-center text-sm settlement-item" data-date="2025-08-25" data-sales="32700" data-deposit="32700">
                            <div class="w-1/4 text-center px-1 text-gray-700">2025-08-25</div>
                            <div class="w-1/4 px-1 text-right font-medium text-red-600">+32,700</div>
                            <div class="w-1/4 px-1 text-right font-medium text-blue-600">-32,700</div>
                            <div class="w-1/4 px-1 text-right font-bold text-gray-900 balance-amount" data-balance="0">0</div> <!-- 누적 잔액 -->
                        </div>

                        <!-- 정산 내역 아이템 1: 8월 26일 (주문) - 데이터 속성 추가 -->
                        <div class="border-b py-3 flex items-center text-sm settlement-item" data-date="2025-08-26" data-sales="53000" data-deposit="0">
                            <div class="w-1/4 text-center px-1 text-gray-700">2025-08-26</div>
                            <div class="w-1/4 px-1 text-right font-medium text-red-600">+53,000</div>
                            <div class="w-1/4 px-1 text-right font-medium text-blue-600">0</div>
                            <div class="w-1/4 px-1 text-right font-bold text-red-600 balance-amount" data-balance="53000">53,000</div> <!-- 누적 잔액 -->
                        </div>
                    </div>
                    <!-- ▲▲▲▲▲ 정산 내역 리스트 끝 ▲▲▲▲▲ -->
                    
                    <!-- ▼▼▼▼▼ [신규] 정산 소계 탭 (테이블 하단) ▼▼▼▼▼ -->
                    <div class="summary-row">
                        <div class="label">소계</div>
                        <!-- 총 판매 -->
                        <div id="summary-sales" class="value text-red-600">0</div> 
                        <!-- 총 입금 -->
                        <div id="summary-deposit" class="value text-blue-600">0</div>
                        <!-- 필터 기간 잔액 (미수금) -->
                        <div id="summary-balance" class="value font-extrabold text-red-600">0</div>
                    </div>
                    <!-- ▲▲▲▲▲ [신규] 정산 소계 탭 끝 ▲▲▲▲▲ -->

                </div>
                <!-- ▲▲▲▲▲ 정산내역 탭 끝 (순서 변경됨) ▲▲▲▲▲ -->
            </div>
        </main>
    </div>

    <!-- ▼▼▼▼▼ 스크립트 블록 수정 (calculateSettlementTotals 함수명 변경 및 소계 탭 업데이트 로직 변경) ▼▼▼▼▼ -->
        <script>
        // 통화 형식 포맷터 (예: 123456 -> 12,345)
        const currencyFormatter = new Intl.NumberFormat('ko-KR');

        // 0원 항목 숨기기 기능
        function hideZeroValues() {
            const candidates = document.querySelectorAll('.hide-if-zero');
            
            candidates.forEach(el => {
                if (el.innerText.includes('0원(') || el.innerText.includes(': 0원')) { 
                    el.classList.add('hidden'); 
                }
            });
        }

        /**
         * 범용 정렬 함수
         */
        function sortItems(container, itemSelector, dateSelector, direction) {
            if (!container) return; 

            const items = Array.from(container.querySelectorAll(itemSelector));

            items.sort((a, b) => {
                const dateTextA = a.querySelector(dateSelector)?.innerText || '';
                const dateTextB = b.querySelector(dateSelector)?.innerText || '';
                
                if (direction === 'asc') {
                    return dateTextA.localeCompare(dateTextB); // 오름차순
                } else {
                    return dateTextB.localeCompare(dateTextA); // 내림차순
                }
            });

            // 정렬된 아이템들을 다시 DOM에 추가
            items.forEach(item => container.appendChild(item));
        }
        
        // ▼▼▼▼▼ [수정] 정산내역 소계 계산 및 표시 함수 (이름 변경: calculateSettlementSummary) ▼▼▼▼▼
        function calculateSettlementSummary() {
            const items = document.querySelectorAll('#settlement-list-container .settlement-item');
            
            let totalSales = 0;
            let totalDeposit = 0;
            let currentBalance = 0; // 필터 기간 동안의 잔액

            items.forEach(item => {
                // data-* 속성에서 숫자 값을 가져옴
                // 현재는 필터링 로직이 없으므로 모든 항목을 합산합니다.
                const sales = parseInt(item.dataset.sales || 0);
                const deposit = parseInt(item.dataset.deposit || 0);
                
                totalSales += sales;
                totalDeposit += deposit;
            });
            
            // 필터 기간 잔액 = 총 판매액 - 총 입금액
            currentBalance = totalSales - totalDeposit;

            // 렌더링
            const summarySalesEl = document.getElementById('summary-sales');
            const summaryDepositEl = document.getElementById('summary-deposit');
            const summaryBalanceEl = document.getElementById('summary-balance');

            if (summarySalesEl) summarySalesEl.innerText = currencyFormatter.format(totalSales);
            if (summaryDepositEl) summaryDepositEl.innerText = currencyFormatter.format(totalDeposit);
            
            if (summaryBalanceEl) {
                summaryBalanceEl.innerText = currencyFormatter.format(currentBalance);
                
                // 잔액 색상 변경: 0보다 크면 미수금(빨간색), 0이하면 회색/검정색
                if (currentBalance > 0) {
                    summaryBalanceEl.classList.add('text-red-600');
                    summaryBalanceEl.classList.remove('text-gray-900', 'text-gray-600');
                } else if (currentBalance < 0) {
                    summaryBalanceEl.classList.add('text-blue-600');
                    summaryBalanceEl.classList.remove('text-red-600', 'text-gray-900', 'text-gray-600');
                } else {
                    summaryBalanceEl.classList.add('text-gray-900');
                    summaryBalanceEl.classList.remove('text-red-600', 'text-blue-600', 'text-gray-600');
                }
            }
        }
        // ▲▲▲▲▲ [수정] 정산내역 소계 계산 및 표시 함수 끝 ▲▲▲▲▲


        document.addEventListener('DOMContentLoaded', () => {
            // ▼▼▼▼▼ 탭 기능 (선택자 수정: .tab-button -> .main-tab-btn) ▼▼▼▼▼
            const mainTabs = document.querySelectorAll('.main-tab-btn');
            const contents = document.querySelectorAll('.tab-content');

            mainTabs.forEach(tab => {
                tab.addEventListener('click', () => {
                    // 모든 탭과 컨텐츠에서 active 클래스 제거
                    mainTabs.forEach(t => t.classList.remove('active'));
                    contents.forEach(c => c.classList.remove('active'));

                    // 클릭된 탭과 해당하는 컨텐츠에 active 클래스 추가
                    tab.classList.add('active');
                    // data-tab 속성값(orders, settlements, notifications)으로 ID를 찾아 active
                    const contentId = tab.dataset.tab;
                    const contentElement = document.getElementById(contentId);
                    if(contentElement) {
                        contentElement.classList.add('active');
                        
                        // ▼▼▼▼▼ 정산 탭이 열릴 때마다 소계 다시 계산 ▼▼▼▼▼
                        if (contentId === 'settlements') {
                            calculateSettlementSummary();
                        }
                        // ▲▲▲▲▲ 정산 탭이 열릴 때마다 소계 다시 계산 끝 ▲▲▲▲▲
                    }
                });
            });
            // ▲▲▲▲▲ 탭 기능 수정 끝 ▲▲▲▲▲


            // ▼▼▼▼▼ 계좌번호 복사 기능 (다시 추가) ▼▼▼▼▼
            const copyBtn = document.getElementById('copyAccountBtn');
            const accountSpan = document.getElementById('accountNumber'); 
            const copyMsg = document.getElementById('copyMessage');

            if (copyBtn && accountSpan && copyMsg) {
                copyBtn.addEventListener('click', () => {
                    const accountNumText = accountSpan.innerText; 
                    const tempTextarea = document.createElement('textarea');
                    tempTextarea.value = accountNumText; 
                    document.body.appendChild(tempTextarea);
                    tempTextarea.select();
                    try {
                        document.execCommand('copy');
                        copyMsg.classList.remove('hidden');
                        setTimeout(() => {
                            copyMsg.classList.add('hidden');
                        }, 1500);
                    } catch (err) {
                        console.error('계좌번호 복사 실패:', err);
                    }
                    document.body.removeChild(tempTextarea);
                });
            }
            // ▲▲▲▲▲ 계좌번호 복사 기능 끝 ▲▲▲▲▲


            // ▼▼▼▼▼ 0원 항목 숨기기 함수 호출 ▼▼▼▼▼
            hideZeroValues();
            // ▲▲▲▲▲ 함수 호출 끝 ▲▲▲▲▲
            
            // ▼▼▼▼▼ 정산내역 누적 미수금 초기 계산 (함수명 변경 반영) ▼▼▼▼▼
            calculateSettlementSummary();
            // ▲▲▲▲▲ 정산내역 누적 미수금 초기 계산 끝 ▲▲▲▲▲

            // ▼▼▼▼▼ 정산내역 필터 버튼 기능 (선택자 수정) ▼▼▼▼▼
            // (수정) 선택자를 .sub-filter-btn으로 변경
            // ▼▼▼▼▼ [수정] 탭별 하위 필터 버튼 기능 (범용) ▼▼▼▼▼
            const tabContents = document.querySelectorAll('.tab-content');
            
            tabContents.forEach(tabContent => {
                const subFilterButtons = tabContent.querySelectorAll('.sub-filter-btn');
                
                if (subFilterButtons.length > 0) {
                    subFilterButtons.forEach(button => {
                        button.addEventListener('click', () => {
                            // 1. 해당 탭 *내부의* 모든 하위 필터 버튼에서 'active' 클래스 제거
                            subFilterButtons.forEach(btn => btn.classList.remove('active'));
                            
                            // 2. 클릭된 버튼에만 'active' 클래스 추가
                            button.classList.add('active');

                            // (실제 데이터 필터링 로직은 여기에 추가)
                            const tabId = tabContent.id;
                            console.log(`[${tabId}] 탭에서 '${button.textContent}' 필터 선택됨`);
                            
                            // 필터 변경 시 정산 소계 업데이트 (더미 데이터 기준)
                            if (tabId === 'settlements') {
                                calculateSettlementSummary();
                            }
                        });
                    });
                }
            });
            // ▲▲▲▲▲ [수정] 필터 버튼 스크립트 끝 ▲▲▲▲▲
            // ▲▲▲▲▲ 필터 버튼 스크립트 끝 ▲▲▲▲▲


            // ▼▼▼▼▼ 주문내역 일자 정렬 기능 ▼▼▼▼▼
            const sortOrderButton = document.getElementById('sort-order-date');
            const sortOrderArrow = document.getElementById('sort-order-arrow');
            const orderContainer = document.getElementById('order-list-container');
            let orderSortDirection = 'desc'; // 초기 정렬 상태 (최신순: 내림차순)

            if (sortOrderButton && orderContainer) {
                sortOrderButton.addEventListener('click', () => {
                    orderSortDirection = orderSortDirection === 'desc' ? 'asc' : 'desc';
                    sortOrderArrow.innerText = orderSortDirection === 'desc' ? '▼' : '▲';
                    <!-- ▼▼▼▼▼ 정렬 대상 선택자 변경 (.border.rounded.lg -> .order-item-row) ▼▼▼▼▼ -->
                    sortItems(orderContainer, '.order-item-row', '.text-sm.text-gray-700', orderSortDirection);
                    <!-- ▲▲▲▲▲ 선택자 변경 끝 ▲▲▲▲▲ -->
                });
            }
            <!-- ▲▲▲▲▲ 주문내역 일자 정렬 기능 끝 ▲▲▲▲▲ -->
            const sortSettlementButton = document.getElementById('sort-settlement-date');
            const sortSettlementArrow = document.getElementById('sort-settlement-arrow');
            const settlementContainer = document.getElementById('settlement-list-container');
            let settlementSortDirection = 'asc'; // 초기 정렬 상태 (순방향: 오름차순)

            if (sortSettlementButton && settlementContainer) {
                sortSettlementButton.addEventListener('click', () => {
                    settlementSortDirection = settlementSortDirection === 'asc' ? 'desc' : 'asc';
                    sortSettlementArrow.innerText = settlementSortDirection === 'asc' ? '▲' : '▼';
                    sortItems(settlementContainer, '.border-b.py-3', '.text-gray-700', settlementSortDirection);
                });
            }
            // ▲▲▲▲▲ 정산내역 일자 정렬 기능 끝 ▲▲▲▲▲

            // ▼▼▼▼▼ 알림내역 일자 정렬 기능 (신규) ▼▼▼▼▼
            const sortNotificationButton = document.getElementById('sort-notification-date');
            const sortNotificationArrow = document.getElementById('sort-notification-arrow');
            const notificationContainer = document.getElementById('notification-list-container');
            let notificationSortDirection = 'desc'; // 초기 정렬 상태 (최신순: 내림차순)

            if (sortNotificationButton && notificationContainer) {
                sortNotificationButton.addEventListener('click', () => {
                    notificationSortDirection = notificationSortDirection === 'desc' ? 'asc' : 'desc';
                    sortNotificationArrow.innerText = notificationSortDirection === 'desc' ? '▼' : '▲';
                    sortItems(notificationContainer, '.border-b.py-3', '.text-xs', notificationSortDirection);
                });
            }
            // ▲▲▲▲▲ 알림내역 일자 정렬 기능 끝 ▲▲▲▲▲

        });
    </script>
    <!-- ▲▲▲▲▲ 스크립트 블록 수정 (calculateSettlementTotals 함수명 변경 및 소계 탭 업데이트 로직 변경) ▼▼▼▼▼ -->
</body>
</html>

