<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>마이페이지 (최근 주문내역 개선)</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://fonts.googleapis.com/css2?family=Noto+Sans+KR:wght@400;500;700&display=swap" rel="stylesheet">
    <style>
        body {
            font-family: 'Noto Sans KR', sans-serif;
        }
        .tab-button.active {
            border-bottom: 2px solid #1f2937;
            color: #1f2937;
            font-weight: 600;
        }
        .tab-content {
            display: none;
        }
        .tab-content.active {
            display: block;
        }

        /* 주문 상태별 색상 (요구사항 반영) */
        .status-badge {
            display: inline-block;
            padding: 0.25rem 0.5rem; /* py-1 px-2 */
            font-size: 0.75rem; /* text-xs */
            font-weight: 600; /* font-semibold */
            border-radius: 0.25rem; /* rounded */
        }
        /* 입금대기 (기존) */
        .status-deposit-wait {
            background-color: #fff7ed; /* bg-orange-100 */
            color: #c2410c; /* text-orange-600 */
        }
        /* 배송완료 (기존) */
        .status-delivery-complete {
            background-color: #f0fdfa; /* bg-teal-100 */
            color: #0f766e; /* text-teal-700 */
        }
        /* 결제완료 (요구사항: 완료:Blue) */
        .status-complete {
            background-color: #eef2ff; /* bg-blue-100 */
            color: #3730a3; /* text-blue-700 */
        }
        /* 주문취소 (기존) */
        .status-cancel {
            background-color: #fef2f2; /* bg-red-100 */
            color: #dc2626; /* text-red-700 */
        }
        /* 주문 (요구사항: 주문:Pink) */
        .status-order {
            background-color: #fdf2f8; /* bg-pink-100 */
            color: #be185d; /* text-pink-700 */
        }
        /* 입금 (요구사항: 입금:Green) */
        .status-deposit-confirm {
            background-color: #f0fdf4; /* bg-green-100 */
            color: #15803d; /* text-green-700 */
        }
        /* 배송 (요구사항: 배송:Orange) */
        .status-delivery-prep {
             background-color: #fff7ed; /* bg-orange-100 */
            color: #c2410c; /* text-orange-700 */
        }

    </style>
</head>
<body class="bg-gray-100">

    <div class="max-w-md mx-auto bg-white min-h-screen">
        
        <!-- 헤더 -->
        <header class="flex justify-between items-center p-4 border-b sticky top-0 bg-white z-10">
            <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M15 18l-6-6 6-6"/></svg>
            <h1 class="text-lg font-bold">마이페이지</h1>
            <div class="w-6"></div>
        </header>

        <main>
            
            <!-- 프로필 섹션 -->
            <section class="p-4">
                <div class="flex items-center">
                    <div class="w-16 h-16 bg-gray-200 rounded-full flex items-center justify-center flex-shrink-0">
                        <svg xmlns="http://www.w3.org/2000/svg" width="32" height="32" viewBox="0 0 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="text-gray-500"><path d="M20 21v-2a4 4 0 0 0-4-4H8a4 4 0 0 0-4 4v2"></path><circle cx="12" cy="7" r="4"></circle></svg>
                    </div>
                    <div class="ml-4">
                        <p class="font-bold text-lg">꽃놀이식당(김민준)</p>
                        <p class="text-sm text-gray-600 mt-1">경남 창원시 성산구 가양로 34</p>
                        <a href="#" class="text-sm text-teal-600 underline mt-2 inline-block font-medium">정보변경</a>
                    </div>
                </div>
            </section>

            
            <!-- 잔액/결제 관리 -->
            <section class="p-4 pt-0">
                <div class="border rounded-lg p-4 bg-gray-50">
                    <div class="grid grid-cols-2 divide-x">
                        <div class="pr-4">
                            <p class="text-sm text-gray-500">예치금/사용 가능 한도</p>
                            <p class="font-bold text-lg text-teal-600 mt-1">3,750,000원</p>
                        </div>
                        <div class="pl-4">
                            <p class="text-sm text-gray-500">결제할 금액</p>
                            <p class="font-bold text-lg text-red-600 mt-1">1,250,000원</p>
                        </div>
                    </div>
                    
                    <!-- 계좌번호 섹션 (한 줄로 수정) -->
                    <div class="border-t border-gray-200 mt-2 pt-2">
                        <div class="flex items-center justify-between">
                            <div class="flex-grow">
                                <span class="text-xs text-gray-500">입금 계좌:</span>
                                <!-- 계좌번호 회색으로 변경 -->
                                <span id="accountNumber" class="text-sm font-bold text-gray-600 ml-1">우리은행 1002-123-456789</span>
                            </div>
                            <button id="copyAccountBtn" class="px-3 py-1 bg-gray-200 text-gray-700 text-xs font-semibold rounded hover:bg-gray-300 relative flex-shrink-0">
                                복사
                                <span id="copyMessage" class="absolute left-1/2 -top-8 -translate-x-1/2 bg-gray-700 text-white text-xs px-2 py-1 rounded hidden whitespace-nowrap">복사되었습니다!</span>
                            </button>
                        </div>
                    </div>
                </div>
            </section>

            <div class="w-full h-2 bg-gray-100"></div>

            
            <!-- 탭 네비게이션 -->
            <section class="sticky top-[61px] bg-white z-10">
                <div class="border-b">
                    <nav class="flex -mb-px">
                        <button class="tab-button flex-1 text-gray-500 py-3 text-center text-sm active" data-tab="orders">최근 주문내역</button>
                        <button class="tab-button flex-1 text-gray-500 py-3 text-center text-sm" data-tab="points">포인트 <span class="font-bold text-teal-600 ml-1">5,000</span></button>
                        <button class="tab-button flex-1 text-gray-500 py-3 text-center text-sm" data-tab="coupons">쿠폰 <span class="font-bold text-teal-600 ml-1">1</span></button>
                    </nav>
                </div>
            </section>

            
            <!-- 탭 컨텐츠 -->
            <div id="tab-contents" class="p-4">
                
                <!-- 최근 주문내역 탭 -->
                <div id="orders" class="tab-content active">
                    <div class="border-t">
                        
                        
                        <!-- ▼▼▼▼▼ 표 제목 행 추가 ▼▼▼▼▼ -->
                        <!-- 헤더(61px) + 탭(48px) = 109px. 탭(z-10)보다 낮은 z-index(9) 설정 -->
                        <div class="flex bg-gray-50 border-b sticky top-[109px] z-[9]">
                            <div class="w-1/4 text-center px-1 py-2 text-sm font-semibold text-gray-600">
                                일자/상태
                            </div>
                            <div class="w-[40%] px-2 py-2 text-sm font-semibold text-gray-600">
                                상품명/금액
                            </div>
                            <div class="w-[35%] px-1 py-2 text-sm font-semibold text-gray-600">
                                결제내역
                            </div>
                        </div>
                        <!-- ▲▲▲▲▲ 표 제목 행 끝 ▲▲▲▲▲ -->


                        <!-- 주문 내역 아이템 1: 입금대기 -->
                        <div class="border-b py-3 flex items-start">
                            
                            <!-- 일자/상태 -->
                            <div class="w-1/4 text-center px-1">
                                <p class="text-sm text-gray-700">2025-08-26</p>
                                <div class="mt-1">
                                    <span class="status-badge status-deposit-wait">입금대기</span>
                                </div>
                            </div>
                            
                            <!-- 상품명/금액 -->
                            <div class="w-[40%] px-2">
                                <p class="text-sm text-gray-800 overflow-hidden text-ellipsis whitespace-nowrap">양파 20KG 외 2건</p>
                                <div class="text-xs text-gray-500 mt-1 space-y-0.5">
                                    <p>주문금액: 51,000원</p>
                                    <p>추가금액: 0원</p>
                                    <p>취소금액: 2,000원</p>
                                </div>
                            </div>
                            
                            <!-- 결제내역 -->
                            <div class="w-[35%] px-1 text-xs text-gray-500">
                                <div class="space-y-1">
                                    <p>입금: 0원</p>
                                    <p>포인트(쿠): 0원</p>
                                    <p>환불액(포): 0원</p>
                                    <p class="font-bold text-red-600">잔액: 53,000원</p>
                                </div>
                            </div>
                        </div>

                        <!-- 주문 내역 아이템 2: 배송완료 -->
                        <div class="border-b py-3 flex items-start">
                            
                            <!-- 일자/상태 -->
                            <div class="w-1/4 text-center px-1">
                                <p class="text-sm text-gray-700">2025-08-25</p>
                                <div class="mt-1">
                                    <span class="status-badge status-delivery-complete">배송완료</span>
                                </div>
                            </div>
                            
                            <!-- 상품명/금액 -->
                            <div class="w-[40%] px-2">
                                <p class="text-sm text-gray-800 overflow-hidden text-ellipsis whitespace-nowrap">흙쪽파(1kg)단 외 1건</p>
                                <div class="text-xs text-gray-500 mt-1 space-y-0.5">
                                    <p>주문금액: 32,700원</p>
                                    <p>추가금액: 0원</p>
                                    <p>취소금액: 0원</p>
                                </div>
                            </div>
                            
                            <!-- 결제내역 -->
                            <div class="w-[35%] px-1 text-xs text-gray-500">
                                <div class="space-y-1">
                                    <p>입금: 32,700원</p>
                                    <p>포인트(쿠): 0원</p>
                                    <p>환불액(포): 0원</p>
                                    <p class="font-bold text-gray-500">잔액: 0원</p>
                                </div>
                            </div>
                        </div>

                        <!-- 주문 내역 아이템 3: 결제완료 -->
                        <div class="border-b py-3 flex items-start">
                            
                            <!-- 일자/상태 -->
                            <div class="w-1/4 text-center px-1">
                                <p class="text-sm text-gray-700">2025-08-24</p>
                                <div class="mt-1">
                                    <span class="status-badge status-complete">결제완료</span>
                                </div>
                            </div>
                            
                            <!-- 상품명/금액 -->
                            <div class="w-[40%] px-2">
                                <p class="text-sm text-gray-800 overflow-hidden text-ellipsis whitespace-nowrap">배추_3입망 외 5건</p>
                                <div class="text-xs text-gray-500 mt-1 space-y-0.5">
                                    <p>주문금액: 16,700원</p>
                                    <p>추가금액: 0원</p>
                                    <p>취소금액: 0원</p>
                                </div>
                            </div>
                            
                            <!-- 결제내역 -->
                            <div class="w-[35%] px-1 text-xs text-gray-500">
                                <div class="space-y-1">
                                    <p>입금: 16,700원</p>
                                    <p>포인트(쿠): 0원</p>
                                    <p>환불액(포): 0원</p>
                                    <p class="font-bold text-gray-500">잔액: 0원</p>
                                </div>
                            </div>
                        </div>

                        <!-- 주문 내역 아이템 4: 추가결제분 -->
                        <div class="border-b py-3 flex items-start">
                            
                            <!-- 일자/상태 -->
                            <div class="w-1/4 text-center px-1">
                                <p class="text-sm text-gray-700">2025-08-23</p>
                                <div class="mt-1">
                                    <span class="status-badge status-complete">결제완료</span>
                                </div>
                                <p class="text-xs text-blue-600 mt-1">(추가결제분)</p>
                            </div>
                            
                            <!-- 상품명/금액 -->
                            <div class="w-[40%] px-2">
                                <p class="text-sm text-gray-800 overflow-hidden text-ellipsis whitespace-nowrap">엄청나게 긴 상품명입니다. 레이아웃이 깨지지 않아야 합니다.</p>
                                <div class="text-xs text-gray-500 mt-1 space-y-0.5">
                                    <p>주문금액: 10,000원</p>
                                    <p>추가금액: 3,000원</p>
                                    <p>취소금액: 0원</p>
                                </div>
                            </div>
                            
                            <!-- 결제내역 -->
                            <div class="w-[35%] px-1 text-xs text-gray-500">
                                <div class="space-y-1">
                                    <p>입금: 13,000원</p>
                                    <p>포인트(쿠): 0원</p>
                                    <p>환불액(포): 0원</p>
                                    <p class="font-bold text-gray-500">잔액: 0원</p>
                                </div>
                            </div>
                        </div>

                        <!-- 주문 내역 아이템 5: 선입금 -->
                        <div class="border-b py-3 flex items-start">
                            
                            <!-- 일자/상태 -->
                            <div class="w-1/4 text-center px-1">
                                <p class="text-sm text-gray-700">2025-08-21</p>
                                <div class="mt-1">
                                    <span class="status-badge status-deposit-confirm">입금완료</span>
                                </div>
                                <p class="text-xs text-gray-600 mt-1">(선입금)</p>
                            </div>
                            
                            <!-- 상품명/금액 -->
                            <div class="w-[40%] px-2">
                                <p class="text-sm text-gray-800 overflow-hidden text-ellipsis whitespace-nowrap">선입금 충전</p>
                                <div class="text-xs text-gray-500 mt-1 space-y-0.5">
                                    <p>주문금액: 0원</p>
                                    <p>추가금액: 0원</p>
                                    <p>취소금액: 0원</p>
                                </div>
                            </div>
                            
                            <!-- 결제내역 -->
                            <div class="w-[35%] px-1 text-xs text-gray-500">
                                <div class="space-y-1">
                                    <p>입금: 50,000원</p>
                                    <p>포인트(쿠): 0원</p>
                                    <p>환불액(포): 0원</p>
                                    <p class="font-bold text-blue-600">잔액: 50,000원</p>
                                </div>
                            </div>
                        </div>

                        <!-- 주문 내역 아이템 6: 주문취소 -->
                        <div class="border-b py-3 flex items-start text-gray-400">
                            
                            <!-- 일자/상태 -->
                            <div class="w-1/4 text-center px-1">
                                <p class="text-sm">2025-08-22</p>
                                <div class="mt-1">
                                    <span class="status-badge status-cancel">주문취소</span>
                                </div>
                            </div>
                            
                            <!-- 상품명/금액 -->
                            <div class="w-[40%] px-2">
                                <p class="text-sm overflow-hidden text-ellipsis whitespace-nowrap">양파 10kg 박스</p>
                                <div class="text-xs mt-1 space-y-0.5">
                                    <p>주문금액: 41,300원</p>
                                    <p>추가금액: 0원</p>
                                    <p>취소금액: 41,300원</p>
                                </div>
                            </div>
                            
                            <!-- 결제내역 -->
                            <div class="w-[35%] px-1 text-xs">
                                <div class="space-y-1">
                                    <p>입금: 41,300원</p>
                                    <p>포인트(쿠): 0원</p>
                                    <p>환불액(포): 41,300원</p>
                                    <p class="font-bold text-gray-500">잔액: 0원</p>
                                </div>
                            </div>
                        </div>

                    </div>
                    <button class="w-full mt-4 text-center p-3 text-sm font-medium text-gray-700 bg-gray-100 rounded-lg hover:bg-gray-200">
                        내역 더보기
                    </button>
                </div>
                
                <!-- 포인트 탭 -->
                <div id="points" class="tab-content">
                    <div class="text-center py-10">
                        <p class="text-gray-500">포인트 내역이 없습니다.</p>
                    </div>
                </div>
                
                <!-- 쿠폰 탭 -->
                <div id="coupons" class="tab-content">
                     <div class="text-center py-10">
                        <p class="text-gray-500">사용 가능한 쿠폰이 없습니다.</p>
                    </div>
                </div>
            </div>
        </main>
    </div>

    <script>
        document.addEventListener('DOMContentLoaded', () => {
            // 탭 기능
            const tabs = document.querySelectorAll('.tab-button');
            const contents = document.querySelectorAll('.tab-content');

            tabs.forEach(tab => {
                tab.addEventListener('click', () => {
                    // 모든 탭과 컨텐츠에서 active 클래스 제거
                    tabs.forEach(t => t.classList.remove('active'));
                    contents.forEach(c => c.classList.remove('active'));

                    // 클릭된 탭과 해당하는 컨텐츠에 active 클래스 추가
                    tab.classList.add('active');
                    document.getElementById(tab.dataset.tab).classList.add('active');
                });
            });

            // 계좌번호 복사 기능
            const copyAccountBtn = document.getElementById('copyAccountBtn');
            const accountNumberElement = document.getElementById('accountNumber');
            
            if(copyAccountBtn && accountNumberElement) {
                const accountNumber = accountNumberElement.textContent;
                const copyMessage = document.getElementById('copyMessage');

                copyAccountBtn.addEventListener('click', () => {
                    // navigator.clipboard.writeText 사용 (권장)
                    if (navigator.clipboard && navigator.clipboard.writeText) {
                        navigator.clipboard.writeText(accountNumber).then(() => {
                            copyMessage.classList.remove('hidden');
                            setTimeout(() => {
                                copyMessage.classList.add('hidden');
                            }, 2000); // 2초 후 메시지 숨김
                        }).catch(err => {
                            console.error('Failed to copy: ', err);
                            fallbackCopyTextToClipboard(accountNumber); // 실패 시 폴백
                        });
                    } else {
                        fallbackCopyTextToClipboard(accountNumber); // navigator.clipboard 미지원 시 폴백
                    }
                });
            }

            // 폴백 복사 기능 (https 환경이 아니거나 구형 브라우저일 경우)
            function fallbackCopyTextToClipboard(text) {
                const textArea = document.createElement("textarea");
                textArea.value = text;
                
                // 화면에서 보이지 않도록 스타일 설정
                textArea.style.position = "fixed";
                textArea.style.top = "0";
                textArea.style.left = "0";
                textArea.style.width = "2em";
                textArea.style.height = "2em";
                textArea.style.padding = "0";
                textArea.style.border = "none";
                textArea.style.outline = "none";
                textArea.style.boxShadow = "none";
                textArea.style.background = "transparent";
                
                document.body.appendChild(textArea);
                textArea.focus();
                textArea.select();
                
                try {
                    const successful = document.execCommand('copy');
                    const msg = successful ? 'successful' : 'unsuccessful';
                    console.log('Fallback: Copying text command was ' + msg);

                    if (successful) {
                        const copyMessage = document.getElementById('copyMessage');
                        copyMessage.classList.remove('hidden');
                        setTimeout(() => {
                            copyMessage.classList.add('hidden');
                        }, 2000);
                    }
                } catch (err) {
                    console.error('Fallback: Oops, unable to copy', err);
                    // alert()는 캔버스 환경에서 작동하지 않으므로 console.error로 대체합니다.
                    console.error('계좌번호 복사에 실패했습니다.');
                }
                
                document.body.removeChild(textArea);
            }
        });
    </script>
</body>
</html>



